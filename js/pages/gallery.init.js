var Shuffle=window.Shuffle;class Demo{constructor(e){this.element=e,this.shuffle=new Shuffle(e,{itemSelector:".picture-item",sizer:e.querySelector(".my-sizer-element")}),this.addShuffleEventListeners(),this._activeFilters=[],this.addFilterButtons(),this.addSorting(),this.addSearchFilter()}addShuffleEventListeners(){this.shuffle.on(Shuffle.EventType.LAYOUT,e=>{console.log("layout. data:",e)}),this.shuffle.on(Shuffle.EventType.REMOVED,e=>{console.log("removed. data:",e)})}addFilterButtons(){var e=document.querySelector(".filter-options");if(e){e=Array.from(e.children);const t=this._handleFilterClick.bind(this);e.forEach(e=>{e.addEventListener("click",t,!1)})}}_handleFilterClick(e){var e=e.currentTarget,t=e.classList.contains("active"),r=e.getAttribute("data-group");this._removeActiveClassFromChildren(e.parentNode);let i;i=t?(e.classList.remove("active"),Shuffle.ALL_ITEMS):(e.classList.add("active"),r),this.shuffle.filter(i)}_removeActiveClassFromChildren(e){var t=e["children"];for(let e=t.length-1;0<=e;e--)t[e].classList.remove("active")}addSorting(){var e=document.querySelector(".sort-options");e&&e.addEventListener("change",this._handleSortChange.bind(this))}_handleSortChange(t){var e=(Array.from(t.currentTarget.children).forEach(e=>{e.querySelector("input").value===t.target.value?e.classList.add("active"):e.classList.remove("active")}),t.target)["value"];let r={};"date-created"===e?r={reverse:!0,by:function(e){return e.getAttribute("data-created")}}:"title"===e&&(r={by:function(e){return e.getAttribute("data-title").toLowerCase()}}),this.shuffle.sort(r)}addSearchFilter(){var e=document.querySelector(".js-shuffle-search");e&&e.addEventListener("keyup",this._handleSearchKeyup.bind(this))}_handleSearchKeyup(e){const r=e.target.value.toLowerCase();this.shuffle.filter((e,t)=>{if(t.group!==Shuffle.ALL_ITEMS&&!(-1!==JSON.parse(e.getAttribute("data-groups")).indexOf(t.group)))return!1;return-1!==e.querySelector(".picture-item__title").textContent.toLowerCase().trim().indexOf(r)})}}document.addEventListener("DOMContentLoaded",()=>{window.demo=new Demo(document.getElementById("grid"))});const tobii=new Tobii;