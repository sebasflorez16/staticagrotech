<!-- Incluyendo los scripts necesarios directamente -->
<script src="/static/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/static/js/app.js"></script>
<script src="/static/js/user-profile.js"></script>

<!-- Iconos necesarios para el menú -->
<link href="https://unpkg.com/@tabler/icons-webfont@latest/tabler-icons.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />


<!-- Topbar profesional y responsive para móvil y desktop -->
<div class="topbar-custom">
    <button class="menu-toggle" aria-label="Abrir menú" onclick="toggleMobileSidebar()">
        <i class="fas fa-bars"></i>
    </button>
    <div class="topbar-title">Agrotech Digital</div>
    <div class="topbar-actions">
        <button class="topbar-icon" aria-label="Notificaciones" disabled>
            <i class="fas fa-bell"></i>
        </button>
        <button class="topbar-icon" aria-label="Perfil" disabled>
            <i class="fas fa-user-circle"></i>
        </button>
    </div>
</div>

<!-- Menú lateral móvil (drawer) -->
<div id="mobile-sidebar" class="mobile-sidebar" style="display: none;">
    <!-- Logo -->
    <div class="brand" style="padding: 32px 0 18px 0; text-align: center;">
        <a href="#" class="logo">
            <span>
                <img src="/static/images/agrotech solo blanco.png" alt="logo-small" class="logo-sm" style="max-width: 80px; margin: 0 auto; display: block;">
            </span>
        </a>
    </div>
    <!-- Menú con rutas reales -->
    <ul class="menu" style="padding: 0 0 10px 0; margin: 0;">
        <li><a href="/dashboard/" style="display: flex; align-items: center; gap: 10px; color: #fff; padding: 10px 22px; border-radius: 7px; transition: background 0.15s; font-size: 15px;"><i class="ti ti-home" style="font-size: 1.2em;"></i> Dashboard</a></li>
        <li><a href="/rrhh/" style="display: flex; align-items: center; gap: 10px; color: #fff; padding: 10px 22px; border-radius: 7px; transition: background 0.15s; font-size: 15px;"><i class="ti ti-user" style="font-size: 1.2em;"></i> Recursos Humanos</a></li>
        <li><a href="/inventario/" style="display: flex; align-items: center; gap: 10px; color: #fff; padding: 10px 22px; border-radius: 7px; transition: background 0.15s; font-size: 15px;"><i class="ti ti-box" style="font-size: 1.2em;"></i> Inventario</a></li>
        <li><a href="/configuracion/" style="display: flex; align-items: center; gap: 10px; color: #fff; padding: 10px 22px; border-radius: 7px; transition: background 0.15s; font-size: 15px;"><i class="ti ti-settings" style="font-size: 1.2em;"></i> Configuración</a></li>
        <li><a href="/parcelas/" style="display: flex; align-items: center; gap: 10px; color: #fff; padding: 10px 22px; border-radius: 7px; transition: background 0.15s; font-size: 15px;"><i class="ti ti-map" style="font-size: 1.2em;"></i> Parcelas</a></li>
        <li><a href="/labores/" style="display: flex; align-items: center; gap: 10px; color: #fff; padding: 10px 22px; border-radius: 7px; transition: background 0.15s; font-size: 15px;"><i class="fa fa-tasks" style="font-size: 1.2em;"></i> Labores</a></li>
        <li><a href="/cultivos/" style="display: flex; align-items: center; gap: 10px; color: #fff; padding: 10px 22px; border-radius: 7px; transition: background 0.15s; font-size: 15px;"><i class="fa fa-tasks" style="font-size: 1.2em;"></i> Cultivos</a></li>
    </ul>
</div>

<!-- Overlay para cerrar el menú móvil -->
<div id="sidebar-overlay" class="sidebar-overlay" style="display: none;"></div>

<style>
.topbar-custom {
    width: 100%;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 2000;
    background: #fff;
    box-shadow: 0 2px 8px rgba(44,62,80,0.07);
    border-bottom: 1px solid #e9ecef;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 12px;
}
.menu-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
    background: none;
    border: none;
    font-size: 28px;
    color: #253445;
    margin-right: 8px;
    cursor: pointer;
}
.topbar-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: #253445;
    letter-spacing: 0.5px;
}
.topbar-actions {
    display: flex;
    align-items: center;
    gap: 10px;
}
.topbar-icon {
    font-size: 22px;
    color: #253445;
    background: none;
    border: none;
    cursor: not-allowed;
    opacity: 0.6;
}

/* Mobile sidebar styles */
.mobile-sidebar {
    display: block;
    position: fixed;
    top: 56px;
    left: 0;
    width: 85vw;
    max-width: 320px;
    min-width: 220px;
    height: calc(100vh - 56px);
    background: #253445;
    z-index: 4000;
    box-shadow: 2px 0 12px rgba(44,62,80,0.12);
    border-right: 1px solid #e9ecef;
    transform: translateX(-100%);
    transition: transform 0.3s ease;
    overflow-y: auto;
    padding-top: 18px;
}

.mobile-sidebar.show {
    transform: translateX(0);
}

.mobile-sidebar .menu li a:hover {
    background-color: rgba(255,255,255,0.1);
}

.sidebar-overlay {
    display: block;
    position: fixed;
    top: 56px;
    left: 0;
    width: 100vw;
    height: calc(100vh - 56px);
    background: rgba(44,62,80,0.18);
    z-index: 3999;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.sidebar-overlay.show {
    opacity: 1;
    visibility: visible;
}

@media (min-width: 768px) {
    .topbar-custom {
        height: 64px;
        font-size: 1.2rem;
        padding: 0 24px;
    }
    .menu-toggle {
        display: none !important; /* Ocultar hamburguesa en desktop */
    }
    .topbar-title {
        font-size: 1.2rem;
    }
    .topbar-icon {
        font-size: 26px;
    }
    .mobile-sidebar,
    .sidebar-overlay {
        display: none !important; /* Ocultar en desktop */
    }
}
</style>

<!-- Contenido existente de horizontal-nav.html -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        fetchAndRenderUserProfile(); // Llamar a la función después de que el contenido esté listo
    });
</script>


